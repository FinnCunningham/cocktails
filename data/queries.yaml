- name: index
  query: >-
    MATCH (c:Cocktail)-[r:CONTAINS]->(i:Ingredient)
    WITH c, r, i
    ORDER BY r.index
    WITH { name:        c.name
         , timing:      c.timing
         , ingredients: collect({ name:   i.name
                                , amount: r.amount
                                , unit:   r.unit
                                })
         , preparation: c.preparation
         } AS cocktail
    ORDER BY cocktail.name
    RETURN {cocktails: collect(cocktail)};
  params: []
  template: site
- name: ingredient
  query: >-
    MATCH (i:Ingredient)<--(cc:Cocktail)
    WHERE i.name CONTAINS {ingredient}
    WITH cc AS c
    MATCH (c)-[r]->(i)
    WITH c, r, i
    ORDER BY r.index
    WITH { name:        c.name
         , timing:      c.timing
         , ingredients: collect({ name:   i.name
                                , amount: r.amount
                                , unit:   r.unit
                                })
         , preparation: c.preparation
         } AS cocktail
    ORDER BY cocktail.name
    RETURN {cocktails: collect(cocktail)};
  params:
    - ingredient: Gin
    - ingredient: Whiskey
    - ingredient: Cognac
    - ingredient: Rum
    - ingredient: Vodka
    - ingredient: Champagne
  template: site
